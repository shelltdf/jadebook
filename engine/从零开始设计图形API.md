# 概述

如何从头开始写一个图形API。

我们用c++语言来一步一步的带你入门。为了方便我们采用c++11为最低规范。

范例代码使用cmake来管理。支持windows linux macos。



# 什么是图形API

类似 OpenGL D3D 这样的硬件驱动绘制过程的API，简单的称为图形API。具体解释的准确不准确，就是这个意思吧。

很多人一开始学这些的时候一上来是懵逼的状态，虽然各种教材都有解释，但是也还是大部分人无法理解这些过于抽象的说法。让初学者去看mesa源码也是不现实的。所以最简单的办法就是从头实现一个简陋的图形API。从而了解具体的实现逻辑和原理。



# 从2D开始

## 建立内存绘制区域

第一步对于没有任何windows开发基础的人来说是个很困难的部分。一开始就遇到一个大坑。所以这个部分并不不详细解析了，仅仅知道是把一个内存区域显示在窗口里就可以了。

范例 1.1

​	启动窗口，建立内存区域，更新到窗口显示。

​	根据时间变换色彩。

​	键盘鼠标输入。

​	同时支持windows linux macos

​	绘制像素。清屏。填充区域。



class windows；

​	创建一个系统窗口。并且键盘鼠标输入。

class context;

​	从窗口对象初始化一个设备环境。设备环境包含一些缓冲区对象。

class device；

​	渲染设备对象。具体的绘制接口。本身并不保存任何状态。



## 内存剪切和文字显示

为了打印一些测试信息，我们设置了一个内存剪切功能。就是从一个内存块剪切内存复制到另一个。

范例1.2

​	读取图片信息（最简单的格式 比如xpm）

​	随机复制图片到任意区域

​	左上角显示文本信息

​	右上角显示FPS和一些基本运行信息

​	双缓冲区交换



class image;

​	简单的RGB和RGBA支持，只有8bit类型。

class context;

​	添加swapbuffer功能。

class device；

​	添加内存bilt功能。



## 并行计算加速

给上面的范例提供一个平行加速功能。

范例1.3

​	功能完全和1.2一致

​	仅仅是提供了并行加速操作



## 色彩混合/色彩计算

class device；

​	增加色彩混合模式设置。

​	增加色彩计算方式设置。



## 让裁剪支持旋转和缩放

给 bilt 接口添加旋转缩放参数接口。



## 精灵动画（应该独立一篇）



# 进入3D的世界

## 向量和矩阵（MVP）

## 绘制点（球面）

## 绘制线（环形）

## 填充三角面（cube）

## 计算光照信息

## 映射贴图

## 读取obj文件

## 鼠标操作器摄像机（环绕观察）

## FPS模式



# 进阶阶段

## buffer缓冲区管理

## 渲染状态概念



# 高级阶段

## 动态缓冲对象管理

## shader的实现







